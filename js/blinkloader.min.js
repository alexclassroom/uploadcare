/**
 * Version: 3.0.4
 * Date: 2020-09-03
 */

'use strict';var Blinkloader=function(){function l(a){return void 0!==a&&null!==a}function J(a){a=a.substring(1+a.lastIndexOf("/"));a=a.split("?")[0];a=a.split("#")[0];return a=a.split(".")[1]}function K(a){var b={};a.replace(/\s/g,"").split(";").forEach(function(f){f=f.split(":");b[m(f[0])]=f[1]||""});return b}function m(a){return a.replace(/\-(.)/g,function(b){return b.toUpperCase()}).replace(/\-/g,"").replace(/^(.)/,function(b){return b.toLowerCase()})}function L(a){var b=Math.max((document.documentElement||
{}).clientHeight||0,window.innerHeight||0);a=a.getBoundingClientRect();return Math.abs(b/2-(a.top+a.bottom)/2)}function M(a){if((a=a.clientHeight)&&1<a)return a}function N(a){if((a=a.clientWidth)&&1<a)return a}function O(){}function P(a){var b=document.createElement("a");b.href=a;return b.href}function n(a){console.error("Blinkloader: "+a);[].slice.call(arguments).slice(1).forEach(function(b){console.error(b)})}function u(a){var b=this;this.node=a.node;this.J=function(){b.node.src||"IMG"!==b.node.nodeName||
(b.node.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=")};this.J();this.M=function(d){var e={};d.blinkOps&&(e=K(d.blinkOps));w.forEach(function(g){var h=m(g);g=d[m("blink-"+g)];void 0!==g&&(e[h]=g)});c.I&&(e.format=e.format||"auto");e.N=e.N||"";return e};var f=a.node.dataset.blinkSrc&&P(a.node.dataset.blinkSrc)||a.node.dataset.blinkUuid&&"https://ucarecdn.com/"+a.node.dataset.blinkUuid+"/";this.a=a.a||{src:a.node.dataset.blinkSrc,
G:a.node.dataset.blinkUuid,url:f,v:J(f),width:N(a.node),height:M(a.node),offset:L(a.node),K:a.node.dataset.blinkGradient||"",i:void 0!==a.node.dataset.blinkLazyload,f:void 0!==a.node.dataset.blinkProgressive,U:void 0!==a.node.dataset.blinkBackground,V:void 0!==a.node.dataset.blinkImageBlock,L:"IMG"===a.node.nodeName,b:this.M(a.node.dataset)};this.B=function(d){var e=new window.Image;e.onload=function(){d(void 0,!0)};e.onerror=function(g){d(g,!1)};e.src=b.a.url};this.R=function(){b.node.src=b.a.url};
this.P=function(){[["background-size","cover"],["background-position","center"],["background-repeat","no-repeat"],["background-image",b.a.K+"url("+b.a.url+")"]].forEach(function(d){b.node.style.setProperty(d[0],d[1])})};this.c=function(){b.a.L?b.R():b.P()};this.C=function(d){b.B(function(e,g){d(e,g);!e&&b.c()})};this.O=function(){"src uuid lazyload gradient background progressive image-block ops".split(" ").forEach(function(d){b.node.removeAttribute("data-blink-"+d)});w.forEach(function(d){b.node.removeAttribute("data-blink-"+
d)})};this.O()}function x(){for(var a=document.querySelectorAll("[data-blink-src], [data-blink-uuid]"),b=0;b<a.length;++b){var f=a[b],d=f.dataset.blinkSrc||f.dataset.blinkUuid;if(void 0!==d)try{var e=void 0,g=new u({node:f});"function"===typeof Event?e=new Event("Blinkloader.pendingImage"):(e=document.createEvent("Event"),e.initEvent("Blinkloader.pendingImage",!0,!0));e.image=g;document.dispatchEvent(e)}catch(h){!0!==y[d]&&n("couldn't render an image "+d,a[b],h),y[d]=!0}}setTimeout(x,300)}function Q(a){document.addEventListener("Blinkloader.pendingImage",
function(b){a(b.image)},!1);x()}function R(a){var b=this;this.l=a;this.j=S(a);this.u=T(a);this.a=this.j.a;this.node=this.j.node;this.c=function(){if(c.g||c.h||c.w||c.f||b.a.f){var f=!1;(c.f||b.a.f)&&b.u.B(function(){!f&&b.u.c()});var d=function(){c.h&&b.l.node.classList.add("blink-fade-in");c.g&&c.g(b.l.node)};b.j.C(function(e){e?b.l.C(d):(d(),f=!0)})}else b.j.c()}}function S(a){var b=JSON.parse(JSON.stringify(a.a)),f=b.width||0,d=b.height||0,e="lighter";c.m&&(e="smart");if(v.A&&c.F){0<f&&(f*=2);
0<d&&(d*=2);if(0<f||0<d)e="lightest";c.m&&(e="smart_retina")}b.b.quality&&(e=b.b.quality);var g=z.map(function(h){var k=m(h[0]);if("quality"===k)return"-/quality/"+e;if("resize"===k)return void 0!==b.b[k]?["-/resize",b.b[k]].filter(Boolean).join("/"):c.D&&(0<f&&3E3>=f||0<d&&3E3>=d)?f>=d?"-/resize/"+f+"x":"-/resize/x"+d:"-/preview";if(void 0!==b.b[k]){var p=[];if("autorotate"===k)return"-/autorotate/yes";if("progressiveJpeg"===k)return"-/progressive/yes";"overlayUuid"===k?p=["-/overlay",b.b[m(h[0])],
b.b[m(h[1])],b.b[m(h[2])],b.b[m(h[3])]]:(k="-/"+h[0].replace(/-/g,"_"),p.push(k),h.forEach(function(r){p.push(b.b[m(r)])}));return p.filter(Boolean).join("/")}}).filter(Boolean).join("/");b.url=a.a.G?[b.url,g].join("")+"/":["https://"+c.host,g,b.url].filter(Boolean).join("/");return new u({node:a.node,a:b})}function T(a){var b=JSON.parse(JSON.stringify(a.a));b.url=a.a.G?[b.url,"-/blur/100/-/progressive/yes/-/resize/65x/"].join(""):["https://"+c.host+"/","-/blur/100/-/progressive/yes/-/resize/65x/",
b.url].join("");return new u({node:a.node,a:b})}function A(){if(B&&0!==t.length){t.sort(function(b,f){return b.node.offset<f.node.offset?1:-1});for(var a=0;a<c.s;a++)(t.pop()||{c:O}).c()}}function C(){B=!0;window.removeEventListener("scroll",C)}function D(){try{Q(function(a){c.valid&&"svg"!==a.a.v&&"gif"!==a.a.v&&0!==(a.a.src||"").indexOf("data:")&&(a=new R(a));var b;if(b=c.i||a.a.i){b=c.H||window.innerHeight||0;var f=a.node.getBoundingClientRect();b=!!(0>f.bottom||0<=f.top-b)}b&&E?t.push(a):a.c()})}catch(a){n("can't render images",
a),setTimeout(D,3E3)}}var v={T:!1,S:!1,protocol:"https",A:!1,width:0},c={valid:!1,host:void 0,W:void 0,w:!0,f:!1,i:!0,s:5,o:250,H:void 0,g:void 0,h:!1,D:!0,I:!0,F:!0,m:!1},z=[["preview"],["scale-crop","scale-crop-position"],["stretch"],["setfill"],["format"],["quality"],["progressive-jpeg"],["srgb"],["max-icc-size"],["enhance"],["sharp"],["blur","blur-strength"],["brightness"],["exposure"],["gamma"],["contrast"],["saturation"],["vibrance"],["warmth"],["filter","filter-amount"],["grayscale"],["invert"],
["autorotate"],["rotate"],["flip"],["mirror"],["overlay-uuid","overlay-dimensions","overlay-coordinates","overlay-opacity"],["resize"],["crop","crop-position"]],w=Array.prototype.concat.apply([],z),y={},t=[],B=!1,E=!1;return{optimize:function(a){try{if(a)if(a.host||a.pubkey){c.host=a.host||a.pubkey+".ucr.io";var b=a.fallback,f=a.progressive,d=a.lazyload,e=a.responsive,g=a.webp,h=a.retina,k=a.smartCompression,p=a.batchSize,r=a.batchInterval,F=a.viewHeight,G=a.beforeRender,H=a.fadeIn;l(b)&&(c.w=b);
l(f)&&(c.f=f);l(d)&&(c.i=d);l(e)&&(c.D=e);l(g)&&(c.I=g);l(h)&&(c.F=h);l(k)&&(c.m=k);l(p)&&(c.s=p);l(r)&&(c.o=r);l(F)&&(c.H=F);l(G)&&(c.g=G);l(H)&&(c.h=H);c.valid=!0}else n("pubkey or host are not specified");else n("missing config")}catch(q){n("configuration is invalid",q)}try{v.A=window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches,v.width=window.innerWidth}catch(q){n("couldn't populate device parameters",q)}try{if(c.h){var I=document.createElement("div");
I.innerHTML='<style type="text/css">.blink-fade-in{-webkit-animation:blinkFadein 1s;-moz-animation:blinkFadein 1s;-ms-animation:blinkFadein 1s;-o-animation:blinkFadein 1s;animation:blinkFadein 1s}@keyframes blinkFadein{from{opacity:0}to{opacity:1}}@-moz-keyframes blinkFadein{from{opacity:0}to{opacity:1}}@-webkit-keyframes blinkFadein{from{opacity:0}to{opacity:1}}@-ms-keyframes blinkFadein{from{opacity:0}to{opacity:1}}@-o-keyframes blinkFadein{from{opacity:0}to{opacity:1}}</style>';document.getElementsByTagName("head")[0].appendChild(I.children[0])}}catch(q){n("couldn't add styles",
q)}try{window.addEventListener("scroll",C),A(),setInterval(A,c.o),E=!0}catch(q){n("couldn't initialize lazy loading",q)}D()}}}()
